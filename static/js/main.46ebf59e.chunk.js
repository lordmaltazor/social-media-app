(this["webpackJsonpsocial-media-app"]=this["webpackJsonpsocial-media-app"]||[]).push([[0],{26:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s(4),c=s.n(a),r=s(19),o=s.n(r),i=s(11),l=s.n(i),u=s(14),m=s(8),d=(s(26),s(10));s(30);d.a.initializeApp({apiKey:"AIzaSyAuqsm6nu4J0RxsACn0askItlOXwkhza7U",authDomain:"social-media-app-a9b1d.firebaseapp.com",projectId:"social-media-app-a9b1d",storageBucket:"social-media-app-a9b1d.appspot.com",messagingSenderId:"1070630316696",appId:"1:1070630316696:web:0f3e47cf2f7b0fef1efeed"});var j=d.a.firestore(),b=s(12);var p=function(e){var t=e.setUsername,s=e.setPassword,a=e.setRepeatedPassword,c=e.submit,r=e.isLoggingIn,o=e.signUp,i=e.errorMessage,l=function(e){t(e.target.value)},u=function(e){s(e.target.value)};return Object(n.jsxs)("div",{className:"login-sign-up-container",children:[Object(n.jsxs)("div",{className:"login",style:{display:r?"flex":"none"},children:[Object(n.jsx)("p",{className:"login-title",children:"Login"}),Object(n.jsxs)("form",{onSubmit:c,children:[Object(n.jsx)("input",{type:"text",onChange:l,placeholder:"Username"}),Object(n.jsx)("input",{type:"password",onChange:u,placeholder:"password"}),Object(n.jsx)("button",{className:"submit",children:"Login"})]}),Object(n.jsx)("p",{className:"no-account",onClick:o,children:"Don't have an account?"}),Object(n.jsx)("p",{className:"error-message",children:i})]}),Object(n.jsxs)("div",{className:"sign-up",style:{display:r?"none":"flex"},children:[Object(n.jsx)("p",{className:"sign-up-title",children:"Sign Up"}),Object(n.jsxs)("form",{onSubmit:c,children:[Object(n.jsx)("input",{type:"text",onChange:l,placeholder:"Username"}),Object(n.jsx)("input",{type:"password",onChange:u,placeholder:"password"}),Object(n.jsx)("input",{type:"password",onChange:function(e){a(e.target.value)},placeholder:"repeat password"}),Object(n.jsx)("button",{className:"submit",onClick:c,children:"Sign up"})]}),Object(n.jsx)("p",{className:"error-message",children:i})]})]})};var f=function(e){var t=e.setPostText,s=e.cancelPost,c=e.post,r=Object(a.useRef)(null);return Object(a.useEffect)((function(){r.current.focus()}),[]),Object(n.jsx)("div",{className:"backdrop",children:Object(n.jsxs)("div",{className:"create-post-modal",children:[Object(n.jsx)("div",{className:"create-post",children:Object(n.jsx)("textarea",{className:"new-post-textarea",cols:"30",rows:"10",ref:r,onChange:function(e){t(e.target.value)},placeholder:"Say something..."})}),Object(n.jsxs)("div",{className:"buttons-container",children:[Object(n.jsx)("button",{className:"cancel-post-button",onClick:s,children:"Cancel"}),Object(n.jsx)("button",{className:"post-button",onClick:c,children:"Post"})]})]})})};var O=function(e){var t=e.comment,s=e.username;return Object(n.jsx)("div",{className:"comment",children:Object(n.jsxs)("div",{className:"comment-container",children:[Object(n.jsx)("p",{className:"comment-sender",style:{color:t.sender===s?"rgb(255, 81, 0)":"rgb(128, 128, 128)"},children:t.sender}),Object(n.jsx)("p",{className:"comment-text",children:t.text})]})})};var h=function(e){var t=e.setCommentText,s=e.cancelComment,a=e.postComment,c=e.newCommentTextarea;return Object(n.jsxs)("div",{className:"new-comment-form",children:[Object(n.jsx)("textarea",{className:"new-comment-textarea",cols:"30",rows:"10",onChange:function(e){t(e.target.value)},ref:c,placeholder:"Say something..."}),Object(n.jsxs)("div",{className:"new-comment-buttons-container",children:[Object(n.jsx)("button",{className:"cancel-comment-button",onClick:s,children:"Cancel"}),Object(n.jsx)("button",{className:"post-comment-button",onClick:a,children:"Comment"})]})]})};var x=function(e){var t=e.post,s=e.postsRef,c=e.username,r=e.isInteractable,o=e.setCreatingComment,i=e.setInspectedPost,l=Object(a.useState)(!1),u=Object(m.a)(l,2),p=u[0],f=u[1],O=Object(a.useState)(!1),h=Object(m.a)(O,2),x=h[0],g=h[1],v=Object(b.a)(j.collection("posts").doc(t.id).collection("comments")),N=Object(m.a)(v,1)[0];return Object(a.useEffect)((function(){f(t.likedBy.includes(c))}),[]),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post-container",children:[Object(n.jsx)("p",{className:"post-sender",style:{color:t.sender===c?"rgb(255, 81, 0)":"rgb(128, 128, 128)"},children:t.sender}),Object(n.jsx)("p",{className:"post-text",children:t.text})]}),Object(n.jsxs)("div",{className:"stats-container",style:{display:r?"flex":"none"},children:[Object(n.jsx)("button",{className:"like-button ".concat(x?"shake":""),onClick:function(){t.likedBy.includes(c)?(s.doc(t.id).update({likedBy:d.a.firestore.FieldValue.arrayRemove(c)}),f(!1),g(!1)):(s.doc(t.id).update({likedBy:d.a.firestore.FieldValue.arrayUnion(c)}),f(!0),g(!0))},style:{color:p?"rgba(255, 0, 0, 1)":"rgba(128, 128, 128, 0.75)"},children:Object(n.jsx)("i",{className:"fas fa-heart"})}),Object(n.jsx)("p",{className:"numer-of-likes",children:t.likedBy.length}),Object(n.jsx)("button",{className:"comments-button",onClick:function(){o(!0),i(t)},children:Object(n.jsx)("i",{className:"fas fa-comments"})}),Object(n.jsx)("p",{className:"numer-of-comments",children:N?N.length:0})]})]})};var g=function(e){var t=e.post,s=e.postsRef,c=e.username,r=e.setCreatingComment,o=Object(a.useState)(""),i=Object(m.a)(o,2),p=i[0],f=i[1],g=j.collection("posts").doc(t.id).collection("comments"),v=g.orderBy("createdAt","desc"),N=Object(b.a)(v,{idField:"id"}),C=Object(m.a)(N,1)[0],y=Object(a.useRef)(null);Object(a.useEffect)((function(){y.current.focus()}),[]);var w=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.add({text:p,sender:c,createdAt:d.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"backdrop",children:Object(n.jsxs)("div",{className:"comments-modal",children:[Object(n.jsx)(x,{post:t,postsRef:s,username:c,isInteractable:!1}),Object(n.jsx)(h,{setCommentText:f,cancelComment:function(){r(!1)},postComment:function(){""!==p&&(w(),y.current.value="")},newCommentTextarea:y}),Object(n.jsx)("div",{className:"comments",children:C&&C.length>0?C.map((function(e){return Object(n.jsx)(O,{comment:e,username:c})})):Object(n.jsx)("p",{className:"no-comments",children:"There doesn't seem to be any comments here yet :/"})})]})})};var v=function(e){var t=e.posts,s=e.postsRef,c=e.username,r=e.creatingComment,o=e.setCreatingComment,i=Object(a.useState)(null),l=Object(m.a)(i,2),u=l[0],d=l[1];return Object(n.jsxs)("div",{className:"feed",children:[t&&t.length>0?t.map((function(e){return Object(n.jsx)(x,{post:e,postsRef:s,username:c,isInteractable:!0,creatingComment:r,setCreatingComment:o,setInspectedPost:d},e.id)})):Object(n.jsx)("p",{className:"no-posts",children:"There doesn't seem to be any posts here yet :/"}),r&&Object(n.jsx)(g,{post:u,postsRef:s,username:c,setCreatingComment:o})]})};var N=function(e){var t=e.username,s=e.setHasLoggedIn,c=Object(a.useState)(!1),r=Object(m.a)(c,2),o=r[0],i=r[1],p=Object(a.useState)(!1),O=Object(m.a)(p,2),h=O[0],x=O[1],g=Object(a.useState)(""),N=Object(m.a)(g,2),C=N[0],y=N[1],w=j.collection("posts"),k=w.orderBy("createdAt","desc"),S=Object(b.a)(k,{idField:"id"}),I=Object(m.a)(S,1)[0],P=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.add({text:C,likedBy:[],sender:t,createdAt:d.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"homepage",children:[Object(n.jsxs)("nav",{children:[Object(n.jsx)("button",{className:"create-post-button",onClick:function(){i(!0)},children:"Create Post"}),Object(n.jsx)("h1",{className:"title",children:"Social Media App"}),Object(n.jsxs)("div",{className:"profile-info",children:[Object(n.jsx)("p",{className:"current-username",children:t}),Object(n.jsx)("button",{className:"sign-out-button",onClick:function(){s(!1)},children:"Sign Out"})]})]}),Object(n.jsx)(v,{posts:I,postsRef:w,username:t,creatingComment:h,setCreatingComment:x}),o&&Object(n.jsx)(f,{setPostText:y,cancelPost:function(){i(!1)},post:function(){""!==C&&(i(!1),P())}})]})};var C=function(){var e=Object(a.useState)(!0),t=Object(m.a)(e,2),s=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(m.a)(r,2),i=o[0],f=o[1],O=Object(a.useState)(""),h=Object(m.a)(O,2),x=h[0],g=h[1],v=Object(a.useState)(""),C=Object(m.a)(v,2),y=C[0],w=C[1],k=Object(a.useState)(""),S=Object(m.a)(k,2),I=S[0],P=S[1],T=Object(a.useState)(""),R=Object(m.a)(T,2),B=R[0],F=R[1],A=j.collection("users"),U=Object(b.a)(A),L=Object(m.a)(U,1)[0],V=function(){F(""),g(""),w(""),P("")},D=function(e){for(var t=0;t<L.length;t++)if(L[t].username===e)return L[t]},E=function(e){var t=!1;return L.map((function(s){s.username===e&&(t=!0)})),t},M=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.add({username:x,password:y,createdAt:d.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"app",children:i?Object(n.jsx)(N,{username:x,setHasLoggedIn:f}):Object(n.jsx)(p,{setUsername:g,setPassword:w,setRepeatedPassword:P,submit:function(e){if(e.preventDefault(),""!==x)if(""!==y){if(s){if(!E(x))return void F("Couln't find a user with that username!");if(E(x)&&D(x).password!==y)return void F("Password is incorrect!");f(!0)}else if(!s){if(""===I)return void F("You have to confirm your password!");if(I!==y)return void F("Your confirmed password and password doesn't match!");if(E(x))return void F("That username is taken!");M(),V(),c(!0)}}else F("You have to enter a password!");else F("You have to enter a username!")},isLoggingIn:s,signUp:function(){c(!1),V()},errorMessage:B})})},y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,32)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(C,{})}),document.getElementById("root")),y()}},[[31,1,2]]]);
//# sourceMappingURL=main.46ebf59e.chunk.js.map