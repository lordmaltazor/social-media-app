(this["webpackJsonpsocial-media-app"]=this["webpackJsonpsocial-media-app"]||[]).push([[0],{26:function(e,t,s){},32:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s(4),c=s.n(a),r=s(20),o=s.n(r),i=s(5),u=(s(26),s(10));s(30);u.a.initializeApp({apiKey:"AIzaSyAuqsm6nu4J0RxsACn0askItlOXwkhza7U",authDomain:"social-media-app-a9b1d.firebaseapp.com",projectId:"social-media-app-a9b1d",storageBucket:"social-media-app-a9b1d.appspot.com",messagingSenderId:"1070630316696",appId:"1:1070630316696:web:0f3e47cf2f7b0fef1efeed"});var l=u.a.firestore(),d=s(11),j=s(12),m=s.n(j),b=s(14);var f=function(e){var t=e.usersRef,s=e.username,c=e.password,r=e.repeatedPassword,o=e.setUsername,l=e.setPassword,d=e.setRepeatedPassword,j=e.getUser,f=e.userExists,p=e.setHasLoggedIn,O=Object(a.useState)(!0),h=Object(i.a)(O,2),x=h[0],v=h[1],g=Object(a.useState)(""),N=Object(i.a)(g,2),C=N[0],k=N[1],w=Object(a.useRef)([]),S=function(){k(""),o(""),l(""),d(""),w.current.forEach((function(e){e.value=""}))},y=function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.add({username:s,password:c,createdAt:u.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){e&&!w.current.includes(e)&&w.current.push(e)};return Object(n.jsxs)("div",{className:"login-container",children:[x?Object(n.jsx)("p",{className:"login-title",children:"Login"}):Object(n.jsx)("p",{className:"login-title",children:"Sign Up"}),Object(n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==s)if(""!==c)if(x){if(!f(s))return void k("Couldn't find a user with that username!");if(f(s)&&j(s).password!==c)return void k("Password is incorrect!");p(!0)}else{if(""===r)return void k("You have to confirm your password!");if(r!==c)return void k("Your confirmed password and password doesn't match!");if(f(s))return void k("That username is taken!");y(),v(!0),k("")}else k("You have to enter a password!");else k("You have to enter a username!")},children:[Object(n.jsx)("input",{className:"login-input",type:"text",onChange:function(e){o(e.target.value)},placeholder:"Username",ref:R}),Object(n.jsx)("input",{className:"login-input",type:"password",onChange:function(e){l(e.target.value)},placeholder:"Password",ref:R}),!x&&Object(n.jsx)("input",{className:"login-input",type:"password",onChange:function(e){d(e.target.value)},placeholder:"Repeated Password",ref:R}),x?Object(n.jsx)("button",{className:"login-submit",children:"Login"}):Object(n.jsx)("button",{className:"login-submit",children:"Sign Up"})]}),x?Object(n.jsx)("p",{className:"change-page",onClick:function(){v(!1),S()},children:"Don't have an account?"}):Object(n.jsx)("p",{className:"change-page",onClick:function(){v(!0),S()},children:"Login"}),Object(n.jsx)("p",{className:"error-message",children:C})]})},p=s(15);var O=function(e){var t=e.setPostText,s=e.cancelPost,c=e.post,r=Object(a.useRef)(null);return Object(a.useEffect)((function(){r.current.focus()}),[]),Object(n.jsx)("div",{className:"backdrop",children:Object(n.jsxs)("div",{className:"create-post-modal",children:[Object(n.jsx)("button",{className:"close",onClick:s,children:Object(n.jsx)("i",{className:"fas fa-times"})}),Object(n.jsx)("textarea",{className:"new-post-textarea",cols:"30",rows:"10",ref:r,onChange:function(e){t(e.target.value)},placeholder:"Say something..."}),Object(n.jsx)("button",{className:"post-button",onClick:c,children:"Post"})]})})};var h=function(e){var t=e.comment,s=e.username;return Object(n.jsx)("div",{className:"comment",children:Object(n.jsxs)("div",{className:"comment-container",children:[Object(n.jsx)("p",{className:"comment-sender",style:{color:t.sender===s?"rgb(255, 81, 0)":"rgb(128, 128, 128)"},children:t.sender}),Object(n.jsx)("p",{className:"comment-text",children:t.text})]})})};var x=function(e){var t=e.setCommentText,s=(e.cancelComment,e.postComment),a=e.newCommentTextarea;return Object(n.jsxs)("div",{className:"new-comment-form",children:[Object(n.jsx)("textarea",{className:"new-comment-textarea",cols:"30",rows:"10",onChange:function(e){t(e.target.value)},ref:a,placeholder:"Say something..."}),Object(n.jsx)("button",{className:"post-comment-button",onClick:s,children:"Comment"})]})};var v=function(e){var t=e.post,s=e.postsRef,c=e.username,r=e.isInteractable,o=e.setCreatingComment,j=e.setInspectedPost,m=Object(a.useState)(!1),b=Object(i.a)(m,2),f=b[0],p=b[1],O=Object(a.useState)(!1),h=Object(i.a)(O,2),x=h[0],v=h[1],g=Object(d.a)(l.collection("posts").doc(t.id).collection("comments")),N=Object(i.a)(g,1)[0];return Object(a.useEffect)((function(){p(t.likedBy.includes(c))}),[]),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post-container",children:[Object(n.jsx)("p",{className:"post-sender",style:{color:t.sender===c?"rgb(255, 81, 0)":"rgb(128, 128, 128)"},children:t.sender}),Object(n.jsx)("p",{className:"post-text",children:t.text})]}),Object(n.jsxs)("div",{className:"stats-container",style:{display:r?"flex":"none"},children:[Object(n.jsx)("button",{className:"like-button ".concat(x?"shake":""),onClick:function(){t.likedBy.includes(c)?(s.doc(t.id).update({likedBy:u.a.firestore.FieldValue.arrayRemove(c)}),p(!1),v(!1)):(s.doc(t.id).update({likedBy:u.a.firestore.FieldValue.arrayUnion(c)}),p(!0),v(!0))},style:{color:f?"rgba(255, 0, 0, 1)":"rgba(128, 128, 128, 0.75)"},children:Object(n.jsx)("i",{className:"fas fa-heart"})}),Object(n.jsx)("p",{className:"numer-of-likes",children:t.likedBy.length}),Object(n.jsx)("button",{className:"comments-button",onClick:function(){o(!0),j(t)},children:Object(n.jsx)("i",{className:"fas fa-comments"})}),Object(n.jsx)("p",{className:"numer-of-comments",children:N?N.length:0})]})]})};var g=function(e){var t=e.post,s=e.postsRef,c=e.username,r=e.setCreatingComment,o=Object(a.useState)(""),l=Object(i.a)(o,2),j=l[0],f=l[1],p=s.doc(t.id).collection("comments"),O=p.orderBy("createdAt","desc"),g=Object(d.a)(O,{idField:"id"}),N=Object(i.a)(g,1)[0],C=Object(a.useRef)(null);Object(a.useEffect)((function(){C.current.focus()}),[]);var k=function(){r(!1)},w=function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.add({text:j,sender:c,createdAt:u.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"backdrop",children:Object(n.jsxs)("div",{className:"comments-modal",children:[Object(n.jsx)("button",{className:"close",onClick:k,children:Object(n.jsx)("i",{className:"fas fa-times"})}),Object(n.jsx)(v,{post:t,postsRef:s,username:c,isInteractable:!1}),Object(n.jsx)(x,{setCommentText:f,cancelComment:k,postComment:function(){""!==j&&(w(),C.current.value="")},newCommentTextarea:C}),Object(n.jsx)("div",{className:"comments",children:N&&N.length>0&&N.map((function(e){return Object(n.jsx)(h,{comment:e,username:c})}))})]})})};var N=function(e){var t=e.getFriendsPost,s=e.postsRef,c=e.username,r=e.creatingComment,o=e.setCreatingComment,u=Object(a.useState)(null),l=Object(i.a)(u,2),d=l[0],j=l[1];return Object(n.jsxs)("div",{className:"feed",children:[t()&&t().length>0?t().map((function(e){return Object(n.jsx)(v,{post:e,postsRef:s,username:c,isInteractable:!0,creatingComment:r,setCreatingComment:o,setInspectedPost:j},e.id)})):Object(n.jsx)("p",{className:"no-posts",children:"Click the 'Add Friend' button to add friends!"}),r&&Object(n.jsx)(g,{post:d,postsRef:s,username:c,setCreatingComment:o})]})};var C=function(e){var t=e.search,s=e.setUserSearch,c=Object(a.useRef)(null);return Object(a.useEffect)((function(){c.current.focus()}),[]),Object(n.jsxs)("form",{className:"search-for-user-form",onSubmit:t,children:[Object(n.jsx)("input",{className:"search-for-user-input",type:"text",ref:c,onChange:function(e){s(e.target.value)},placeholder:"Search for a user"}),Object(n.jsx)("button",{className:"search-for-user-button",children:"Search"})]})};var k=function(e){var t=e.user,s=e.users,c=e.friends,r=e.friendsRef,o=e.setAddingFriend,l=Object(a.useState)(""),d=Object(i.a)(l,2),j=d[0],m=d[1],b=Object(a.useState)(""),f=Object(i.a)(b,2),p=f[0],O=f[1],h=Object(a.useState)(null),x=Object(i.a)(h,2),v=x[0],g=x[1];return Object(n.jsx)("div",{className:"backdrop",children:Object(n.jsxs)("div",{className:"search-for-user-modal",children:[Object(n.jsx)("button",{className:"close",onClick:function(){return o(!1)},children:Object(n.jsx)("i",{className:"fas fa-times"})}),Object(n.jsx)(C,{search:function(e){if(e.preventDefault(),""!==j){O(j);var n=!1;if(j!==t.username)for(var a=0;a<s.length;a++)s[a].username===j&&(g(s[a]),n=!0);!1===n&&g(null)}},setUserSearch:m}),v?Object(n.jsxs)("div",{className:"found-user",children:[Object(n.jsx)("p",{className:"found-user-name",children:v.username}),function(e){for(var t=!1,s=0;s<c.length;s++)c[s].username===e.username&&(t=!0);return t}(v)?Object(n.jsx)("button",{className:"unfriend-button",onClick:function(){r.doc(v.id).delete()},children:"Unfriend"}):Object(n.jsx)("button",{className:"add-as-friend-button",onClick:function(){r.doc(v.id).set({username:v.username,password:v.password,createdAt:u.a.firestore.FieldValue.serverTimestamp()})},children:"Add as Friend"})]}):""!==p&&Object(n.jsxs)("p",{className:"no-users-found",children:["Sorry, didn't find any user with the name '",p,"'"]})]})})};var w=function(e){var t=e.user,s=e.setHasLoggedIn,c=e.users,r=e.usersRef,o=Object(a.useState)(!1),j=Object(i.a)(o,2),f=j[0],h=j[1],x=Object(a.useState)(!1),v=Object(i.a)(x,2),g=v[0],C=v[1],w=Object(a.useState)(!1),S=Object(i.a)(w,2),y=S[0],R=S[1],F=Object(a.useState)(""),P=Object(i.a)(F,2),A=P[0],I=P[1],T=l.collection("posts"),U=T.orderBy("createdAt","desc"),B=Object(d.a)(U,{idField:"id"}),L=Object(i.a)(B,1)[0],E=r.doc(t.id).collection("friends"),V=Object(d.a)(E,{idField:"id"}),D=Object(i.a)(V,1)[0],H=Object(a.useState)(!1),Y=Object(i.a)(H,2),z=Y[0],J=Y[1],M=function(){if(null!=D){for(var e=[],t=[],s=0;s<D.length;s++)t[s]=D[s].username;for(var n=0;n<L.length;n++)t.includes(L[n].sender)&&e.push(L[n]);return e}};M();var q=function(){s(!1)},K=function(){I(""),h(!0)},X=function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.add({text:A,likedBy:[],sender:t.username,createdAt:u.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"homepage",children:[Object(n.jsxs)("nav",{children:[Object(n.jsx)("h1",{className:"title",children:"Social Media App"}),Object(n.jsxs)("div",{className:"desktop-nav",children:[Object(n.jsxs)("div",{className:"buttons-container",children:[Object(n.jsx)("button",{className:"create-post-button",onClick:K,children:"Create Post"}),Object(n.jsx)("button",{className:"add-friend-button",onClick:function(){return R(!0)},children:"Add Friend"})]}),Object(n.jsxs)("div",{className:"profile-info",children:[Object(n.jsx)("p",{className:"current-username",children:t.username}),Object(n.jsx)("button",{className:"sign-out-button",onClick:q,children:"Sign Out"})]})]}),Object(n.jsxs)("div",{className:"mobile-nav",children:[Object(n.jsx)("button",{className:"hamburger-menu-button",onClick:function(){return J(!0)},children:Object(n.jsx)(p.a,{})}),z&&Object(n.jsx)("div",{className:"backdrop"}),z&&Object(n.jsxs)("div",{className:"mobile-menu",children:[Object(n.jsx)("button",{className:"close",onClick:function(){return J(!1)},children:Object(n.jsx)(p.b,{})}),Object(n.jsxs)("div",{className:"mobile-profile-info",children:[Object(n.jsx)("p",{className:"mobile-current-username",children:t.username}),Object(n.jsx)("button",{className:"mobile-sign-out-button",onClick:q,children:"Sign Out"})]}),Object(n.jsxs)("div",{className:"mobile-buttons-container",children:[Object(n.jsx)("button",{className:"mobile-create-post-button",onClick:function(){K(),J(!1)},children:"Create Post"}),Object(n.jsx)("button",{className:"mobile-add-friend-button",onClick:function(){R(!0),J(!1)},children:"Add Friend"})]})]})]})]}),Object(n.jsx)(N,{getFriendsPost:M,postsRef:T,username:t.username,creatingComment:g,setCreatingComment:C}),f&&Object(n.jsx)(O,{setPostText:I,cancelPost:function(){h(!1)},post:function(){""!==A&&(h(!1),X())}}),y&&Object(n.jsx)(k,{user:t,users:c,usersRef:r,friends:D,friendsRef:E,setAddingFriend:R})]})};var S=function(){var e=l.collection("users"),t=Object(d.a)(e,{idField:"id"}),s=Object(i.a)(t,1)[0],c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],u=r[1],j=Object(a.useState)(""),m=Object(i.a)(j,2),b=m[0],p=m[1],O=Object(a.useState)(""),h=Object(i.a)(O,2),x=h[0],v=h[1],g=Object(a.useState)(""),N=Object(i.a)(g,2),C=N[0],k=N[1],S=function(e){for(var t=0;t<s.length;t++)if(s[t].username===e)return s[t]};return Object(n.jsx)("div",{className:"app",children:o?Object(n.jsx)(w,{user:S(b),setHasLoggedIn:u,users:s,usersRef:e}):Object(n.jsx)(f,{usersRef:e,username:b,password:x,repeatedPassword:C,setUsername:p,setPassword:v,setRepeatedPassword:k,getUser:S,userExists:function(e){var t=!1;return s.map((function(s){s.username===e&&(t=!0)})),t},setHasLoggedIn:u})})},y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,33)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),y()}},[[32,1,2]]]);
//# sourceMappingURL=main.074cee94.chunk.js.map